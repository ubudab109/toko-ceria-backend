import{r as x,j as e,z as h,c as k}from"./app-DVTrhL1p.js";import{B as j}from"./ButtonBack-9t6ATpas.js";import{M as v}from"./constant-CWNcz--l.js";import{a as N}from"./helpert-BocEPLOR.js";import{s as w}from"./index-ikzcNs2d.js";import{P as S}from"./package-BG6wzjzp.js";import{X as C}from"./x-TECCxTS_.js";import{L as b,T as g,S as I,C as M}from"./tag-CmG9tD2x.js";import{D as P,S as q}from"./scale-Cd9B83q4.js";import{c as T}from"./createLucideIcon-CpnvUODs.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"m13 21-3-3 3-3",key:"s3o1nf"}],["path",{d:"M20 18H10",key:"14r3mt"}],["path",{d:"M3 11h.01",key:"1eifu7"}],["rect",{x:"6",y:"3",width:"5",height:"8",rx:"2.5",key:"v9paqo"}]],R=T("decimals-arrow-left",K),i=({idHtmlFor:o,label:s,icon:a,errors:t,children:c,halfWidth:l=!1,isRequired:d=!1})=>e.jsxs("div",{className:l?"w-full md:w-1/2":"w-full",children:[e.jsxs("label",{htmlFor:String(o),className:"flex items-center mb-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(a,{className:"w-4 h-4 mr-2 text-blue-500"}),s," ",d&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c,t&&e.jsx("p",{className:"mt-1 text-xs text-red-500 dark:text-red-400 font-medium",children:t})]});function H({isEdit:o,data:s,setData:a,errors:t,handleSubmit:c,processing:l,products:d}){const[p,m]=x.useState(!1),[y,u]=x.useState(!1),n=r=>`
        w-full p-3 text-sm rounded-lg transition-all duration-200
        bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white
        border ${t[r]?"border-red-500 ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"}
        focus:ring-1 focus:outline-none
    `,f=r=>{a("name",r.name),a("price",r.price),a("measurement",r.measurement),a("product_id",r.id),m(!1)};return e.jsxs("div",{className:"w-full max-w-full p-6 sm:p-8 bg-white dark:bg-gray-800 shadow-2xl rounded-xl border border-gray-100 dark:border-gray-700 transition-all duration-300 mx-auto",children:[e.jsx(j,{}),e.jsxs("h1",{className:"flex items-center text-3xl font-extrabold text-gray-900 dark:text-white mb-6 border-b border-gray-200 dark:border-gray-700 pb-4",children:[e.jsx(S,{className:"w-8 h-8 mr-3 text-blue-600"}),o?"Edit Inventory":"Tambah Inventory Baru"]}),p&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl mx-4 p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Pilih Produk"}),e.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto divide-y divide-gray-200 dark:divide-gray-700",children:d.length>0?d.map(r=>e.jsxs("button",{type:"button",onClick:()=>f(r),className:"w-full text-left px-4 py-3 hover:bg-blue-100 dark:hover:bg-blue-900 transition-colors duration-200 rounded-md",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.name}),r.category&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.category.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:N(r.price)})]},r.id)):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-6",children:"Tidak ada produk tersedia"})})]})}),e.jsxs("form",{onSubmit:c,className:"space-y-8",encType:"multipart/form-data",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-gray-400"})," Detail Dasar"]}),e.jsxs(i,{isRequired:!0,id:"name",label:"Nama Inventory",icon:g,errors:t.name,children:[e.jsx("input",{id:"name",type:"text",value:s.name,onChange:r=>{a("name",r.target.value),a("product_id",null)},placeholder:"Contoh: Kopi Arabica Gayo",required:!0,className:n("name")}),e.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-sm mt-1 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 dark:bg-blue-400 dark:hover:bg-blue-500",children:"Pilih dari produk"})]}),e.jsxs(i,{isRequired:!0,id:"name",label:"SKU",icon:g,errors:t.name,children:[e.jsx("input",{id:"name",type:"text",value:s.sku,readOnly:!0,placeholder:"Klik Generate SKU",required:!0,className:n("name")}),e.jsx("button",{type:"button",className:"text-sm mt-1 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 dark:bg-blue-400 dark:hover:bg-blue-500",onClick:async()=>{if(!s.name){h.error("Mohon mengisi nama inventory terlebih dahulu");return}u(!0);const r=await k.post(w("generate.sku"));a("sku",r.data.sku),h.success(`SKU berhasil dibuat: ${r.data.sku}`),u(!1)},children:y?"Tunggu Sebentar...":"Generate SKU Otomatis"})]}),e.jsx(i,{id:"description",label:"Deskripsi Inventory",icon:b,errors:t.description,children:e.jsx("textarea",{id:"description",value:s.description||"",onChange:r=>a("description",r.target.value),placeholder:"Deskripsi lengkap Inventory Anda...",rows:3,className:n("description")+" resize-y"})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx(i,{isRequired:!0,id:"price",label:"Harga (IDR)",icon:P,errors:t.price,halfWidth:!0,children:e.jsx("input",{id:"price",type:"number",step:"0.01",value:s.price,onChange:r=>a("price",r.target.value),placeholder:"Cth: 150000.00",required:!0,className:n("price")})}),e.jsx(i,{id:"measurement",label:"Satuan",icon:q,errors:t.measurement,children:e.jsx("select",{id:"measurement",value:s.measurement,onChange:r=>a("measurement",r.target.value),className:n("measurement")+" appearance-none",children:v.map(r=>e.jsx("option",{value:r,children:r},r))})}),e.jsx(i,{id:"stock",label:"Stock",icon:R,errors:t.measurement,children:e.jsx("input",{id:"stock",type:"number",step:"0.01",value:s.stock,onChange:r=>a("stock",r.target.value),placeholder:"Cth: 5",required:!0,className:n("stock")})})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("button",{type:"submit",disabled:l,className:`flex items-center px-6 py-2.5 text-base font-semibold rounded-lg text-white transition-all duration-300
                            bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300
                            dark:bg-blue-700 dark:hover:bg-blue-800 dark:focus:ring-blue-900
                            disabled:opacity-60 disabled:cursor-not-allowed shadow-md hover:shadow-lg`,children:[l&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!l&&(o?e.jsx(I,{className:"w-5 h-5 mr-2"}):e.jsx(M,{className:"w-5 h-5 mr-2"})),l?"Menyimpan...":o?"Simpan Perubahan Inventory":"Tambah Inventory"]})})]})]})}export{H as default};
